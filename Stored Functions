-- For Accepting Friendship
CREATE OR REPLACE FUNCTION accept_friendship(user1 integer, user2 integer) 
    RETURNS void AS $$
      BEGIN
     UPDATE  friendrelation SET friendship_status='2' WHERE action_user_id=user2 and user_one_id in (user1,user2) and user_two_id in (user1,user2);
    END;
    $$ LANGUAGE plpgsql;

-- For Adding Friendship
CREATE OR REPLACE FUNCTION add_friendship(user1 integer, user2 integer) 
    RETURNS void AS $$
      BEGIN
      INSERT INTO friendrelation VALUES (user_one_id, user_two_id,1,0,user_one_id,current_timestamp,current_timestamp);
    END;
    $$ LANGUAGE plpgsql;
    

-- For Declining Friendship
CREATE OR REPLACE FUNCTION decline_friendship(user1 integer, user2 integer) 
    RETURNS void AS $$
      BEGIN
      DELETE from friendrelation  where user_one_id in (user1,user2) and user_two_id in (user1,user2);
    END;
    $$ LANGUAGE plpgsql;
    
    
-- For Uploading photos to profile
CREATE OR REPLACE FUNCTION upload_photos(character varchar(100),image varchar(50),userid integer) 
    RETURNS void AS $$
      BEGIN
      INSERT INTO multimedia(post_time,content,description,user_id) VALUES (current_timestamp,image,text,userid);
    END;
    $$ LANGUAGE plpgsql;

-- For uploading diary entries to profile
CREATE OR REPLACE FUNCTION upload_diary(diary_title varchar(100),diary_desc varchar(50),diary_media varchar(100),location integer, userid integer) 
    RETURNS void AS $$
      BEGIN
      INSERT INTO diaryentry(entry,user_id,diarytime,title,loc_id,multimedia) VALUES (diary_desc,userid,current_timestamp,diary_title,location,diary_media);
    END;
    $$ LANGUAGE plpgsql;
    
-- For uploading posts to profile
CREATE OR REPLACE FUNCTION upload_posts(user1 INTEGER,user2 INTEGER, description varchar(150))
    RETURNS void AS $$
      BEGIN
      INSERT INTO posts(poster_id, postee_id, content,post_time) VALUES (user1,user2,description,current_timestamp);
    END;
    $$ LANGUAGE plpgsql;
    

